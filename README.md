# python
Python3 scripts I've written for a homelab or work environement.

1. [Icinga1 -> Icinga2 Configuration Conversion Script](https://github.com/greggoryrussell/python/blob/main/icinga1-to-icinga2.py)
    + During a job I had at a university this script assisted me with converting an existing codebase of Icinga1 configuration scripts that monitored over 500 hosts and 900 services throughout the college of engineering. It was a good exercise / refresher course on Python3 as this was the largest program I've written yet in this language. I'm quote proud of it, even if it is quite hacky. It helped me automate a rather time consuming process and taught me a lot about monitoring and Icinga2. I continued to maintain this codebase throughout the course of my work including regular updates and adding new plugins / features. Frequent merge requests from various departments made this a fun learning experience in code collaboration, [CI/CD](https://github.com/greggoryrussell/ci-cd/blob/main/icinga2/gitlab-icinga2.yml) and helped me learn how to talk and work with my fellow devs / sysadmins on what needs they have regarding monitoring.
    + I set up this Icinga2 system as an Infrastructure-as-Code environement in Gitlab, to: Promote peer review, facilitate code collaboration and the ability to audit the system and troubleshoot complex monitoring issues / requirements as a team. 
    + Since this repository is the actual production environment I wrote a [.gitlab-ci.yml script](https://github.com/greggoryrussell/ci-cd/blob/main/icinga2/gitlab-icinga2.yml) to ensure uptime with each commit pushed. The Gitlab runner tests the syntax of all Icinga2 configuration scripts being pushed in a commit. The container runs the Icinga2 daemon's snytax check. Icinga2 will crash if any config files have a syntax error. This script acts as a gate to ensure every commit being pushed passes a syntax validation check. 
    + I wrote this [Ansible Playbook](https://github.com/greggoryrussell/ci-cd/blob/main/icinga2/restart-ic2.yml) to be triggered via webhook on Ansible Tower. This syncs the repositories configuration files in the `live/` directory via `git pull`, this is actually a symlink to `/etc/icinga2/conf.d` which is the live configuration folder. Since the above CI script ensures every config is syntacticly valid it then restarts the icinga2 daemon so the configuration pushes are then loaded instantly after the check passes and the results can be viewed in real time on the Icinga2 web interface.
